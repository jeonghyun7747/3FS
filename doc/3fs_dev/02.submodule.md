
## git push error 
```sh
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
  (commit or discard the untracked or modified content in submodules)
        modified:   third_party/folly (modified content, untracked content)
        modified:   third_party/rocksdb (modified content)
```

ì´ ë©”ì‹œì§€ëŠ” í˜„ì¬ Git ì›Œí‚¹ ë””ë ‰í† ë¦¬ì—ì„œ \*\*`third_party/folly`\*\*ì™€ \*\*`third_party/rocksdb`\*\*ë¼ëŠ” **submodule**ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

---

## ğŸ§© ë©”ì‹œì§€ í•´ì„

```bash
Changes not staged for commit:
  ...
  modified:   third_party/folly (modified content, untracked content)
  modified:   third_party/rocksdb (modified content)
```

### â–¶ï¸ ì˜ë¯¸

| í•­ëª©                          | ì˜ë¯¸                                                   |
| --------------------------- | ---------------------------------------------------- |
| `modified content`          | submodule ë””ë ‰í„°ë¦¬ ë‚´ë¶€ì—ì„œ ì»¤ë°‹ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŒ (tracked íŒŒì¼ ë³€ê²½) |
| `untracked content`         | submodule ë‚´ë¶€ì— Gitì´ ì¶”ì í•˜ì§€ ì•ŠëŠ” ìƒˆë¡œìš´ íŒŒì¼ì´ ìˆìŒ                |
| `modified: third_party/...` | ì´ submoduleì´ í˜„ì¬ ë¶€ëª¨ ì €ì¥ì†Œì— ì •ì˜ëœ ì»¤ë°‹ê³¼ ë‹¤ë¥¸ ì»¤ë°‹ì„ ê°€ë¦¬í‚¤ê³  ìˆìŒ       |

---

## âœ… í•´ê²° ë°©ë²•

### ğŸ”¹ ë³€ê²½ì‚¬í•­ í™•ì¸ (submodule ë‚´ë¶€ì—ì„œ)

```bash
cd third_party/folly
git status

cd ../rocksdb
git status
```

### ğŸ”¹ í•„ìš” ì—†ëŠ” ë³€ê²½ ì‚¬í•­ ì œê±°í•˜ë ¤ë©´

```bash
cd third_party/folly
git restore .     # tracked íŒŒì¼ ë³µêµ¬
git clean -fd     # untracked íŒŒì¼ ì‚­ì œ

cd ../rocksdb
git restore .
git clean -fd
```

### ğŸ”¹ ë³€ê²½ ì‚¬í•­ì„ ìœ ì§€í•˜ê³  ì»¤ë°‹í•˜ë ¤ë©´

#### 1. submodule ë‚´ë¶€ì—ì„œ ë³€ê²½ ì»¤ë°‹:

```bash
cd third_party/folly
git add .
git commit -m "Update folly"

cd ../rocksdb
git add .
git commit -m "Update rocksdb"
```

#### 2. ë¶€ëª¨ ì €ì¥ì†Œë¡œ ëŒì•„ì™€ì„œ submodule í¬ì¸í„° ì»¤ë°‹

```bash
cd ../..
git add third_party/folly third_party/rocksdb
git commit -m "Update submodule pointers"
```

---

## ğŸ› ï¸ ê¸°íƒ€: `.gitignore`ë¡œ submodule ë‚´ë¶€ íŒŒì¼ì„ ë¬´ì‹œí•˜ê³  ì‹¶ë‹¤ë©´?

> **ì£¼ì˜**: `.gitignore`ëŠ” submodule ë””ë ‰í† ë¦¬ ë‚´ë¶€ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.
> submoduleì€ ë…ë¦½ëœ Git ì €ì¥ì†Œì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

* ë§Œì•½ `third_party/folly` ë‚´ë¶€ì—ì„œ ìƒì„±ëœ ë¹Œë“œ íŒŒì¼ ë“±ë§Œ ë¬´ì‹œí•˜ê³  ì‹¶ë‹¤ë©´ í•´ë‹¹ ë””ë ‰í† ë¦¬ ë‚´ë¶€ `.gitignore` íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.

---

í•„ìš”í•˜ì‹œë©´ submoduleì„ ì œê±°í•˜ê±°ë‚˜, íŠ¹ì • ì»¤ë°‹ìœ¼ë¡œ ë¦¬ì…‹í•˜ëŠ” ë°©ë²•ë„ ì•Œë ¤ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


# git clean

í˜„ì¬ ìƒí™©ì„ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **ë¸Œëœì¹˜ ìƒíƒœ:** `origin/develop`ê³¼ ë™ê¸°í™”ë¨ (ì¦‰, ì»¤ë°‹ëœ ë³€ê²½ ì‚¬í•­ì€ ì—†ìŒ)
* **ë³€ê²½ ì‚¬í•­:** ì»¤ë°‹ë„ ì•ˆ í–ˆê³ , ìŠ¤í…Œì´ì§•ë„ ì•ˆ í•œ **Untracked íŒŒì¼/ë””ë ‰í„°ë¦¬ë§Œ ìˆìŒ**

  * `fuse/Doxyfile`, `fuse/Doxyfile.bak`, `fuse/html/`, `fuse/latex/`

---

## ğŸ¯ ëª©í‘œ: **Untracked íŒŒì¼ ë° ë””ë ‰í„°ë¦¬ ëª¨ë‘ ì‚­ì œ**

ì´ëŸ´ ë• ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤:

```bash
git clean -fd
```

### ğŸ” ì‚¬ì „ í™•ì¸ì„ ì›í•œë‹¤ë©´:

```bash
git clean -nd
```

ì´ë ‡ê²Œ í•˜ë©´ ì‹¤ì œ ì‚­ì œí•˜ì§€ ì•Šê³  **ë¬´ì—‡ì´ ì‚­ì œë ì§€** ëª©ë¡ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.

---

## ğŸ’¬ ê° ì˜µì…˜ ì„¤ëª…

* `-f` (force): ì‚­ì œë¥¼ ê°•ì œë¡œ ìˆ˜í–‰ (**í•„ìˆ˜ ì˜µì…˜**)
* `-d`: ë””ë ‰í„°ë¦¬ë„ í•¨ê»˜ ì‚­ì œ
* `-n`: (dry-run) ì‹¤ì œ ì‚­ì œëŠ” í•˜ì§€ ì•Šê³  ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚ ì§€ ë¯¸ë¦¬ ë³´ì—¬ì¤Œ

---

## âœ… ì •ë¦¬í•´ì„œ ë‹¨ê³„ë³„ë¡œ ì¶”ì²œí•˜ëŠ” ë°©ë²•:

1. ì‚­ì œë  í•­ëª© ë¨¼ì € í™•ì¸:

   ```bash
   git clean -nd
   ```

2. ë¬¸ì œê°€ ì—†ìœ¼ë©´ ì‹¤ì œ ì‚­ì œ ì‹¤í–‰:

   ```bash
   git clean -fd
   ```

---

ì´ ëª…ë ¹ìœ¼ë¡œ `git status`ì— ë³´ì´ë˜ ëª¨ë“  **ì¶”ì ë˜ì§€ ì•Šì€ íŒŒì¼ ë° í´ë”**ê°€ ê¹¨ë—ì´ ì •ë¦¬ë©ë‹ˆë‹¤.


# git submodule ì œê±° 

`git submodule`ë¡œ ë“±ë¡ëœ ì„œë¸Œëª¨ë“ˆì„ ì œê±°í•˜ë ¤ë©´ ì•„ë˜ ìˆœì„œëŒ€ë¡œ ì‘ì—…í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `third_party/fmt` ì„œë¸Œëª¨ë“ˆì„ ì œê±°í•œë‹¤ê³  ê°€ì •í•˜ë©´ ë‹¤ìŒ ì ˆì°¨ë¥¼ ë”°ë¥´ì„¸ìš”:

---

### ğŸ”§ ì„œë¸Œëª¨ë“ˆ ì œê±° ì ˆì°¨ (ì˜ˆ: `third_party/fmt`)

1. **`.gitmodules` íŒŒì¼ì—ì„œ ì œê±°**

   ```bash
   git config -f .gitmodules --remove-section submodule.third_party/fmt
   ```

2. **`.git/config`ì—ì„œë„ ì œê±°**

   ```bash
   git config --remove-section submodule.third_party/fmt
   ```

3. **ì„œë¸Œëª¨ë“ˆ ìºì‹œì™€ ë””ë ‰í„°ë¦¬ ì‚­ì œ**

   ```bash
   git rm --cached third_party/fmt
   rm -rf third_party/fmt
   ```

4. **ë³€ê²½ ì‚¬í•­ ì»¤ë°‹**

   ```bash
   git commit -m "Remove submodule third_party/fmt"
   ```

---

### ğŸ“Œ ëª¨ë“  ì„œë¸Œëª¨ë“ˆ ì œê±° ì‹œ (ëª¨ë‘ ì‚­ì œí•˜ë ¤ëŠ” ê²½ìš°)

```bash
# ëª¨ë“  ì„œë¸Œëª¨ë“ˆì„ í•˜ë‚˜ì”© ì œê±°
for path in third_party/*; do
    git config -f .gitmodules --remove-section submodule.$path
    git config --remove-section submodule.$path
    git rm --cached $path
    rm -rf $path
done

# ë³€ê²½ ì»¤ë°‹
git commit -m "Remove all third_party submodules"
```

---

### ğŸ” ë§ˆë¬´ë¦¬ í™•ì¸

```bash
# .gitmodulesê°€ ë¹„ì—ˆê±°ë‚˜ ì—†ëŠ”ì§€ í™•ì¸
cat .gitmodules

# ë” ì´ìƒ ì„œë¸Œëª¨ë“ˆì´ ì—†ëŠ”ì§€ í™•ì¸
git submodule status
```

---

í•„ìš” ì‹œ `.gitmodules` íŒŒì¼ ìì²´ë¥¼ ì œê±°í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```bash
rm .gitmodules
git commit -am "Remove .gitmodules file after submodule cleanup"
```

í•„ìš”í•œ íŠ¹ì • ì„œë¸Œëª¨ë“ˆë§Œ ì œê±°í•˜ì‹¤ ê²½ìš°, í•´ë‹¹ ê²½ë¡œë§Œ ìœ„ ë‹¨ê³„ì— ì ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
# 3FS submodule ì¬ë“±ë¡ 
## ì‚­ì œ 
```sh
git submodule status
for path in third_party/*; do
    git config -f .gitmodules --remove-section submodule.$path
    git config --remove-section submodule.$path
    git rm --cached $path
    rm -rf $path
done
git submodule status
```

git rm --cached -r  third_party/googletest
git rm --cached -r  third_party/folly
git rm --cached -r  third_party/leveldb
git rm --cached -r  third_party/rocksdb
git rm --cached -r  third_party/scnlib
git rm --cached -r  third_party/pybind11
git rm --cached -r  third_party/clickhouse-cpp
git rm --cached -r  third_party/fmt
git rm --cached -r  third_party/toml11
git rm --cached -r 	third_party/jemalloc
git rm --cached -r  third_party/mimalloc
git rm --cached -r  third_party/zstd
git rm --cached -r  third_party/liburing
git rm --cached -r  third_party/gtest-parallel


## ì¬ë“±ë¡ 
```sh
git submodule add  https://github.com/google/googletest.git third_party/googletest
git submodule add  https://github.com/facebook/folly.git	third_party/folly
git submodule add  https://github.com/google/leveldb.git third_party/leveldb
git submodule add  https://github.com/facebook/rocksdb.git third_party/rocksdb
git submodule add  https://github.com/eliaskosunen/scnlib.git	third_party/scnlib
git submodule add  https://github.com/pybind/pybind11.git third_party/pybind11 	third_party/pybind11
git submodule add  https://github.com/ClickHouse/clickhouse-cpp.git third_party/clickhouse-cpp
git submodule add  https://github.com/fmtlib/fmt.git 	third_party/fmt
git submodule add  https://github.com/ToruNiina/toml11.git 	third_party/toml11
git submodule add  https://github.com/jemalloc/jemalloc.git 	third_party/jemalloc
git submodule add  https://github.com/microsoft/mimalloc.git 	third_party/mimalloc
git submodule add  https://github.com/facebook/zstd.git 	third_party/zstd
git submodule add  https://github.com/axboe/liburing.git 	third_party/liburing
git submodule add  https://github.com/google/gtest-parallel.git third_party/gtest-parallel
```