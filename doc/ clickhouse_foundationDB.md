
# ClickHouseì™€ FoundationDBëŠ” ë‘˜ ë‹¤ ê°•ë ¥í•œ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì´ì§€ë§Œ, ì„¤ê³„ ì² í•™ê³¼ ì‚¬ìš© ì‚¬ë¡€ê°€ í¬ê²Œ ë‹¤ë¦…ë‹ˆë‹¤.  

## ğŸ” **1. ê°œìš” ë¹„êµ**  

|  | **ClickHouse** | **FoundationDB** |
|---|---|---|
| **ìœ í˜•** | ì»¬ëŸ¼ ê¸°ë°˜ OLAP DB (ë¶„ì„ìš©) | ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œ |
| **ì£¼ìš” ëª©ì ** | ëŒ€ëŸ‰ ë°ì´í„° ë¶„ì„ (OLAP, BI, ë¡œê·¸ ë¶„ì„) | íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë° í™•ì¥ ê°€ëŠ¥í•œ ë¶„ì‚° ë°ì´í„° ì €ì¥ì†Œ |
| **ë°ì´í„° ëª¨ë¸** | ì»¬ëŸ¼ ê¸°ë°˜ í…Œì´ë¸” | Key-Value Store (Document, SQL Layer ì¶”ê°€ ê°€ëŠ¥) |
| **íŠ¸ëœì­ì…˜ ì§€ì›** | ì•½í•œ íŠ¸ëœì­ì…˜ ì§€ì› (OLAP íŠ¹í™”) | ê°•ë ¥í•œ ACID íŠ¸ëœì­ì…˜ |
| **í™•ì¥ì„±** | ì„ í˜• í™•ì¥ ê°€ëŠ¥, ë¶„ì‚° í™˜ê²½ ìµœì í™” | ê¸€ë¡œë²Œ ë¶„ì‚° ê°€ëŠ¥, ìë™ ìƒ¤ë”© |
| **ì‚¬ìš© ì‚¬ë¡€** | ë¡œê·¸ ë¶„ì„, BI, ì‹œê³„ì—´ ë°ì´í„° | ê¸ˆìœµ ì‹œìŠ¤í…œ, ë¶„ì‚° íŠ¸ëœì­ì…˜, í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ |

---

## ğŸ¯ **2. ì£¼ìš” ì°¨ì´ì  ìƒì„¸ ë¹„êµ**  

### âœ… **1) ì•„í‚¤í…ì²˜ ë° ë°ì´í„° ì €ì¥ ë°©ì‹**
- **ClickHouse**: ì»¬ëŸ¼í˜• ì €ì¥ë°©ì‹(Columnar Storage)ì„ ì‚¬ìš©í•˜ì—¬ OLAP(Online Analytical Processing) ì¿¼ë¦¬ë¥¼ ìµœì í™”í•¨.  
  - `SELECT` ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ê³ , ë¹ ë¥¸ ì§‘ê³„ ë° ë¶„ì„ì„ ì§€ì›.  
  - ë°ì´í„° ì••ì¶•ì´ ë›°ì–´ë‚˜ê³ , ë¹ ë¥¸ ì½ê¸° ì†ë„ë¥¼ ì œê³µ.  

- **FoundationDB**: Key-Value Store ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ê¸°ë³¸ì ìœ¼ë¡œ ACID íŠ¸ëœì­ì…˜ì„ ì œê³µí•˜ëŠ” ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤.  
  - ìƒ¤ë”©(Sharding)ê³¼ ë°ì´í„° ë³µì œë¥¼ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ì—¬ ë†’ì€ ê°€ìš©ì„±ì„ ì œê³µ.  
  - SQLì´ ê¸°ë³¸ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©°, ë³„ë„ì˜ SQL Layerë¥¼ ì¶”ê°€í•´ì•¼ í•¨.  

---

### âœ… **2) íŠ¸ëœì­ì…˜ ì§€ì› (ACID vs. Eventually Consistent)**
- **ClickHouse**:  
  - ì£¼ë¡œ OLAP ì›Œí¬ë¡œë“œë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— `INSERT`, `UPDATE`, `DELETE`ëŠ” ì œí•œì ìœ¼ë¡œ ì§€ì›ë¨.  
  - ê¸°ë³¸ì ìœ¼ë¡œ **íŠ¸ëœì­ì…˜ì„ ê°•ë ¥í•˜ê²Œ ì§€ì›í•˜ì§€ ì•ŠìŒ** (OLTP ìš©ë„ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŒ).  
  - ëŒ€ëŸ‰ì˜ ë°ì´í„° ì ì¬ ë° ë¶„ì„ì„ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•˜ëŠ” ë° ìµœì í™”ë¨.  

- **FoundationDB**:  
  - **ê°•ë ¥í•œ ACID íŠ¸ëœì­ì…˜ ì§€ì›** (ë¶„ì‚° í™˜ê²½ì—ì„œë„ íŠ¸ëœì­ì…˜ ì¼ê´€ì„± ìœ ì§€).  
  - ê¸ˆìœµ, í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë“± íŠ¸ëœì­ì…˜ì´ ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ì— ì í•©.  
  - SQL ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì–´ ì§ì ‘ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ë„ ìˆì§€ë§Œ, SQL Layer(ì˜ˆ: CockroachDB, Snowflakeì˜ ì¼ë¶€ ë‚´ë¶€ ì‹œìŠ¤í…œ) ìœ„ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆìŒ.  

---

### âœ… **3) ì„±ëŠ¥ ë° í™•ì¥ì„±**
|  | **ClickHouse** | **FoundationDB** |
|---|---|---|
| **ì½ê¸° ì„±ëŠ¥** | ì´ˆê³ ì† (ì»¬ëŸ¼í˜• ì €ì¥ + ë²¡í„°í™” ì—°ì‚°) | ë¹ ë¦„ (Key-Value ê¸°ë°˜) |
| **ì“°ê¸° ì„±ëŠ¥** | ë°°ì¹˜ ì‚½ì…(INSERT)ì— ìµœì í™” | ì‹¤ì‹œê°„ ì“°ê¸°/ì½ê¸° ìµœì í™” |
| **í™•ì¥ì„±** | ë¶„ì‚° ë…¸ë“œ ì¶”ê°€ ì‹œ ì„ í˜• í™•ì¥ | ìƒ¤ë”© ìë™ ì§€ì› (ì „ì—­ í™•ì¥) |
| **ë°ì´í„° ë³µì œ** | ê¸°ë³¸ ì§€ì› (Replicated MergeTree) | ìë™ ë³µì œ ë° ì¥ì•  ë³µêµ¬ |

- **ClickHouse**ëŠ” OLAP ì‹œìŠ¤í…œì— ì í•©í•˜ì—¬ ë¹ ë¥¸ ë¶„ì„ì„ ì œê³µí•˜ì§€ë§Œ, OLTP(íŠ¸ëœì­ì…˜ ì²˜ë¦¬)ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŒ.  
- **FoundationDB**ëŠ” OLTP ë° íŠ¸ëœì­ì…˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ëŠ” ì‹œìŠ¤í…œì— ì í•©í•¨.  

---

### âœ… **4) ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€**
|  | **ClickHouse** | **FoundationDB** |
|---|---|---|
| **ë¡œê·¸ ë¶„ì„** | âœ… ë§¤ìš° ì í•© | âŒ ë¶€ì í•© |
| **ì‹œê³„ì—´ ë°ì´í„°** | âœ… ì í•© (ë¹ ë¥¸ Aggregation) | âš ï¸ ê°€ëŠ¥í•˜ì§€ë§Œ ë¹„íš¨ìœ¨ì  |
| **ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤** | âœ… ë§¤ìš° ì í•© | âŒ ë¶€ì í•© |
| **OLTP íŠ¸ëœì­ì…˜** | âŒ ë¶€ì í•© | âœ… ë§¤ìš° ì í•© |
| **ê¸ˆìœµ ì‹œìŠ¤í…œ** | âŒ ë¶€ì í•© | âœ… ë§¤ìš° ì í•© |
| **ë¶„ì‚° ì €ì¥ì†Œ** | âš ï¸ ê°€ëŠ¥í•˜ì§€ë§Œ ì í•©í•˜ì§€ ì•ŠìŒ | âœ… ë§¤ìš° ì í•© |
| **ëŒ€ê·œëª¨ ìƒ¤ë”©** | âœ… ì§€ì› (ìˆ˜ë™ ì„¤ì •) | âœ… ìë™ ìƒ¤ë”© |

---

## ğŸ“Œ **ê²°ë¡ : ClickHouse vs FoundationDB, ì–¸ì œ ì‚¬ìš©í• ê¹Œ?**
- **ClickHouseê°€ ì í•©í•œ ê²½ìš°**  
  - ì‹¤ì‹œê°„ ë¡œê·¸ ë¶„ì„ ë° ë°ì´í„° ì‹œê°í™”  
  - ë¹ ë¥¸ `SELECT` ì„±ëŠ¥ì´ ì¤‘ìš”í•œ BI(Big Data) ë¶„ì„  
  - ëŒ€ëŸ‰ì˜ ì‹œê³„ì—´ ë°ì´í„° ì €ì¥ ë° ì§‘ê³„ ì²˜ë¦¬  

- **FoundationDBê°€ ì í•©í•œ ê²½ìš°**  
  - ê¸€ë¡œë²Œ íŠ¸ëœì­ì…˜ì´ í•„ìš”í•œ ê¸ˆìœµ/ê²°ì œ ì‹œìŠ¤í…œ  
  - ê³ ê°€ìš©ì„±ì´ í•„ìš”í•œ ë¶„ì‚° ë°ì´í„° ì €ì¥ì†Œ  
  - Key-Value ê¸°ë°˜ì˜ í™•ì¥ ê°€ëŠ¥í•œ ë°ì´í„° ë ˆì´ì–´ êµ¬ì¶•  

---

### ğŸ¯ **í•µì‹¬ ìš”ì•½**
- ClickHouse: **OLAP ë¶„ì„ ìµœì í™”**, ë¹ ë¥¸ ì½ê¸° ì„±ëŠ¥, ë¡œê·¸/BI ì‹œìŠ¤í…œì— ì í•©  
- FoundationDB: **ACID íŠ¸ëœì­ì…˜ ë³´ì¥**, ë¶„ì‚° Key-Value Store, ê¸ˆìœµ ë° OLTP ì‹œìŠ¤í…œì— ì í•©  

ğŸ’¡ **ë§Œì•½ OLAP ë¶„ì„ì´ í•„ìš”í•˜ë©´ ClickHouse, OLTP íŠ¸ëœì­ì…˜ì´ í•„ìš”í•˜ë©´ FoundationDBë¥¼ ì„ íƒí•˜ì„¸ìš”!** ğŸ˜Š


#  clickhouse port ë³€ê²½  9000 -> 9500 

ClickHouseì˜ ê¸°ë³¸ í¬íŠ¸(9000ë²ˆ)ë¥¼ ë³€ê²½í•˜ë ¤ë©´ **ì„¤ì • íŒŒì¼ (`config.xml`)ì„ ìˆ˜ì •**í•´ì•¼ í•©ë‹ˆë‹¤.  

---

## 1ï¸âƒ£ **í˜„ì¬ í¬íŠ¸ í™•ì¸**
ê¸°ë³¸ì ìœ¼ë¡œ ClickHouseëŠ” ë‹¤ìŒ í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  

| í”„ë¡œí† ì½œ | ê¸°ë³¸ í¬íŠ¸ | ì„¤ëª… |
|---|---|---|
| TCP | `9000` | ClickHouse í´ë¼ì´ì–¸íŠ¸(ê¸°ë³¸) |
| HTTP | `8123` | HTTP API |
| MySQL | `9004` | MySQL í”„ë¡œí† ì½œ í˜¸í™˜ |
| PostgreSQL | `9005` | PostgreSQL í”„ë¡œí† ì½œ í˜¸í™˜ |

í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ë¥¼ í™•ì¸í•˜ë ¤ë©´:
```sh
sudo netstat -tulnp | grep clickhouse
```
ë˜ëŠ”
```sh
ss -tulnp | grep clickhouse
```

---

## 2ï¸âƒ£ **í¬íŠ¸ ë³€ê²½ ë°©ë²•**
ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ í¬íŠ¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

### ğŸ”¹ **`config.xml` íŒŒì¼ ìˆ˜ì •**
ClickHouseì˜ ì„¤ì • íŒŒì¼ (`config.xml`)ì€ ë³´í†µ ë‹¤ìŒ ìœ„ì¹˜ì— ìˆìŠµë‹ˆë‹¤.

- Ubuntu/Debian: `/etc/clickhouse-server/config.xml`
- CentOS/RHEL: `/etc/clickhouse-server/config.xml`
- MacOS (Homebrew ì„¤ì¹˜): `/usr/local/etc/clickhouse-server/config.xml`

```sh
sudo nano /etc/clickhouse-server/config.xml
```

íŒŒì¼ì—ì„œ `<listen_host>` ë° `<tcp_port>` ê°’ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

```xml
<yandex>
    <!-- ê¸°ë³¸ TCP í¬íŠ¸ ë³€ê²½ -->
    <tcp_port>9500</tcp_port>

    <!-- HTTP API í¬íŠ¸ ë³€ê²½ -->
    <http_port>8181</http_port>

    <!-- í´ë¼ì´ì–¸íŠ¸ ì ‘ì†ì„ í—ˆìš©í•  í˜¸ìŠ¤íŠ¸ ì§€ì • -->
    <listen_host>0.0.0.0</listen_host>
</yandex>
```
> ğŸ”¹ **ì£¼ì˜:** `listen_host`ë¥¼ `0.0.0.0`ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³´ì•ˆì´ í•„ìš”í•œ ê²½ìš° `127.0.0.1`ë¡œ ì œí•œí•˜ì„¸ìš”.

---

## 3ï¸âƒ£ **ClickHouse ì„œë²„ ì¬ì‹œì‘**
ì„¤ì •ì„ ì ìš©í•˜ë ¤ë©´ ClickHouse ì„œë²„ë¥¼ ì¬ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.

```sh
sudo systemctl restart clickhouse-server
```
ë˜ëŠ” Dockerì—ì„œ ì‹¤í–‰ ì¤‘ì´ë¼ë©´:
```sh
docker restart clickhouse
```

ì„¤ì •ì´ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸:
```sh
clickhouse-client --port 9500
```

ë˜ëŠ” HTTP API í™•ì¸:
```sh
curl http://localhost:8181
```

---

## 4ï¸âƒ£ **ë°©í™”ë²½ ì„¤ì • (ì„ íƒ ì‚¬í•­)**
í¬íŠ¸ë¥¼ ë³€ê²½í•œ í›„ ë°©í™”ë²½ì—ì„œ ìƒˆ í¬íŠ¸ë¥¼ í—ˆìš©í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```sh
sudo ufw allow 9500/tcp
sudo ufw allow 8181/tcp
```
ë˜ëŠ” CentOSì—ì„œ:
```sh
sudo firewall-cmd --add-port=9500/tcp --permanent
sudo firewall-cmd --add-port=8181/tcp --permanent
sudo firewall-cmd --reload
```

---

### âœ… **ê²°ë¡ **
ClickHouseì˜ ê¸°ë³¸ í¬íŠ¸ë¥¼ ë³€ê²½í•˜ë ¤ë©´:
1. `/etc/clickhouse-server/config.xml`ì—ì„œ `<tcp_port>` ìˆ˜ì •
2. ì„œë²„ ì¬ì‹œì‘ (`sudo systemctl restart clickhouse-server`)
3. ë°©í™”ë²½ ì„¤ì • (í•„ìš” ì‹œ)

ì´ì œ ìƒˆë¡œìš´ í¬íŠ¸ì—ì„œ ClickHouseë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸš€  
ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ë©´ ë§ì”€í•´ì£¼ì„¸ìš”. ğŸ˜Š